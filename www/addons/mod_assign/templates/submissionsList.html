<ion-view view-title="{{ 'mma.mod_assign.submissions' | translate }}">
    <mm-split-view load-when="submissionsLoaded" >
          <ion-content>
            <!-- ion-refresher needs to be direct child of ion-content to work with native scrolling -->
           <ion-refresher pulling-text="{{ 'mm.core.pulltorefresh' | translate }}" ng-if="submissionsLoaded" on-refresh ="refreshSubmissions()">
            </ion-refresher>
            <mm-loading hide-until="submissionsLoaded">
                <div class="text-center" ng-if="submissions && submissions.length > 0 || !noSubmission">
                  <a ng-disabled="syncDisable" class="button button-full button-calm" ng-click="sync()">{{ 'mma.mod_assign.gradesynctitle' | translate }}</a>
                </div>
                <p ng-if="submissions && submissions.length == 0 || noSubmission" class="padding">{{ 'mma.mod_assign.noContent' | translate }}</p>
                <ul class="list" ng-if="submissions && submissions.length > 0">
                    <li ng-repeat="sub in submissions">

                        <a ng-if="isTablet" class="item item-icon-right"
                           mm-split-view-link="site.mod_assign-grading({userid: sub.userid})"
                           title="{{sub.userfullname}}">
                            <mm-format-text>{{sub.userfullname}}</mm-format-text>
                            <span class="badge">{{sub.gradeData.grade}}</span>
                            <i ng-if="sub.attachments.length > 0" class="icon ion-document"></i>
                            <i ng-if="sub.graded" class="icon ion-android-done"></i>
                        </a>
                        <a ng-if="!isTablet" class="item item-icon-right"
                           mm-split-view-link="site.mod_assign-grading({submissions: submissions, courseid: courseid, assignid: assignid, userid: sub.userid})"
                           title="{{sub.userfullname}}">
                            <mm-format-text>{{sub.userfullname}}</mm-format-text>
                            <i ng-if="sub.attachments.length > 0" class="icon ion-document"></i>
                        </a>
                    </li>
                </ul>
            </mm-loading>
    </mm-split-view>
</ion-view>
